/// $Header
/// ============================================================================
///		Author		: M. Ivanchenko
///		Date create	: 17-09-2013
///		Date update	: 30-01-2014
///		Comment		:
/// ============================================================================
#ifndef __WIDGET_SEARCH_H__
#define __WIDGET_SEARCH_H__

#include <QWidget>
#include <QLineEdit>
#include <QDateEdit>

#include "data_adapter_request.h"

namespace mac_mediator
{

class combobox_ad;
class combobox_mr;
class combobox_mediator;
class combobox_request_category;
class combobox_declarant_type;

/// ############################################################################
///			class widget_search_card
/// ############################################################################
    class widget_search_card : public QWidget
    {
    Q_OBJECT
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        widget_search_card( const widget_search_card &rhs );

	public:
        /// --------------------------------------------------------------------
        explicit widget_search_card(QWidget *parent = 0);
        /// --------------------------------------------------------------------
        virtual ~widget_search_card( );

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        const data_request_search_criteria& search_criteria( ) const
        {
            return this->_search_criteria;
        }

    private:
        /// --------------------------------------------------------------------
        int id_declarant_type( ) const;
        /// --------------------------------------------------------------------
        int id_ad( ) const;
        /// --------------------------------------------------------------------
        int id_mr( ) const;
        /// --------------------------------------------------------------------
        int id_mediator( ) const;
        /// --------------------------------------------------------------------
        int id_request_category( ) const;


    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        void initialize( );
        /// --------------------------------------------------------------------
        void init_layout( );
        /// --------------------------------------------------------------------
        void init_connections( );
        /// --------------------------------------------------------------------
        QWidget* init_declarant_type( );
        /// --------------------------------------------------------------------
        QWidget* init_ad( );
        /// --------------------------------------------------------------------
        QWidget* init_mr( );
        /// --------------------------------------------------------------------
        QWidget* init_mediator( );
        /// --------------------------------------------------------------------
        QWidget* init_request_type( );
        /// --------------------------------------------------------------------
        QWidget* init_declarant( );
        /// --------------------------------------------------------------------
        QWidget* init_period( );
        /// --------------------------------------------------------------------
        void clear_data( );
        /// --------------------------------------------------------------------
        void set_search_criteria( );
        /// --------------------------------------------------------------------
        bool search_criteria_valid( );

    public:

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    private:

	public:

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        widget_search_card& operator=( const widget_search_card &rhs );

	public:

    /// ========================================================================
    ///			SIGNALS
    /// ========================================================================

    /// ========================================================================
    ///			SLOTS
    /// ========================================================================
    public slots:
        void find_requests( );
        void clear_search_criteria( );
        void requery_mr( );

    /// ========================================================================
    ///			FIELDS
    /// ========================================================================
    private:
        combobox_declarant_type         *_cbx_declarant_type;
        combobox_ad                     *_cbx_ad;
        combobox_mr                     *_cbx_mr;
        combobox_mediator               *_cbx_mediator;
        combobox_request_category       *_cbx_request_category;
        QDateEdit                       *_dte_from;
        QDateEdit                       *_dte_to;
        QLineEdit                       *_txt_declarant;

        data_request_search_criteria    _search_criteria;

	};//class widget_search
/// ############################################################################
/// ----------------------------------------------------------------------------

}//namespace mac_mediator
#endif // __WIDGET_SEARCH_H__
